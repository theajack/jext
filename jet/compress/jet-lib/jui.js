!function(){var _=Jet.__base__;_._useList.push("jui");var n=null,i=!1,S=Jet.$;if(_._JT.tag("head")._JT_findAttr("rel=stylesheet")._JT_each(function(t){0==i&&t.href._JT_has("jui")&&t.href._JT_has("css")&&(i=!0)}),!i){var t=_._JT.ct("link")._JT_attr({rel:"stylesheet",href:"https://www.theajack.com/jet/assets/css/jui.min.css"});t.onload=function(){n&&(n(),i=!0)},_._JT.tag("head")._JT_prepend(t)}var a=new Array(19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448),e=new Array("甲","乙","丙","丁","戊","己","庚","辛","壬","癸"),o=new Array("子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"),h=new Array("鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"),v=(new Array(0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758),new Array("日","一","二","三","四","五","六","七","八","九","十")),d=new Array("初","十","廿","卅","□"),f=new Array("正","二","三","四","五","六","七","八","九","十","十一","腊"),m=new Array("0101*元旦","0214 情人节","0308 妇女节","0312 植树节","0401 愚人节","0422 地球日","0501 劳动节","0504 青年节","0531 无烟日","0601 儿童节","0606 爱眼日","0701 建党日","0707 抗战纪念日","0801 建军节","0910 教师节","0918 九·一八事变纪念日","1001*国庆节","1031 万圣节","1111 光棍节","1201 艾滋病日","1213 南京大屠杀纪念日","1224 平安夜","1225 圣诞节"),I=new Array("0520 母亲节","0630 父亲节","1144 感恩节"),U=new Array("0101*春节","0115 元宵节","0202 龙抬头","0505 端午节","0707 七夕","0715 中元节","0815 中秋节","0909 重阳节","1208 腊八节","1223 小年","0100*除夕");function p(t){var e,n=348;for(e=32768;8<e;e>>=1)n+=a[t-1900]&e?1:0;return n+g(t)}function g(t){return J(t)?65536&a[t-1900]?30:29:0}function J(t){return 15&a[t-1900]}function j(t,e){return a[t-1900]&65536>>e?30:29}function s(t){var e,n,i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=0,o=new Date(1900,0,31),s=Math.round((i-o)/864e5);for(this.dayCyl=s+40,this.monCyl=14,e=1900;e<2050&&0<s;e++)s-=a=p(e),this.monCyl+=12;for(s<0&&(s+=a,e--,this.monCyl-=12),this.year=e,this.yearCyl=e-1864,n=J(e),this.isLeap=!1,e=1;e<13&&0<s;e++)a=0<n&&e==n+1&&0==this.isLeap?(--e,this.isLeap=!0,g(this.year)):j(this.year,e),1==this.isLeap&&e==n+1&&(this.isLeap=!1),s-=a,0==this.isLeap&&this.monCyl++;0==s&&0<n&&e==n+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--e,--this.monCyl)),s<0&&(s+=a,--e,--this.monCyl),this.month=e,this.day=s+1}function c(t,e){for(var n,i=t.getFullYear(),a=t.getMonth()+1,o=t.getDate(),s=0,l=(n=i)%4==0&&(n%100!=0||n%400==0),r=1900;r<i;r++)s+=p(r);for(r=1;r<a;r++)r==J(i)&&(s+=g(i)),s+=j(i,r);l&&e&&(s+=j(i,r)),s+=parseInt(o)-1;var c=new Date(1900,0,31),u=new Date(c.valueOf()+864e5*s);this.year=u.getFullYear(),this.month=u.getMonth(),this.day=u.getDate(),this.isLeap=l}function y(t){return e[t%10]+o[t%12]}var C=new Array("小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"),l=new Array(4,19,3,18,4,19,4,19,4,20,4,20,6,22,6,22,6,22,7,22,6,21,6,21),r="0123415341536789:;<9:=<>:=1>?012@015@015@015AB78CDE8CD=1FD01GH01GH01IH01IJ0KLMN;LMBEOPDQRST0RUH0RVH0RWH0RWM0XYMNZ[MB\\]PT^_ST`_WH`_WH`_WM`_WM`aYMbc[Mde]Sfe]gfh_gih_Wih_WjhaWjka[jkl[jmn]ope]qph_qrh_sth_W",u="211122112122112121222211221122122222212222222221222122222232222222222222222233223232223232222222322222112122112121222211222122222222222222222222322222112122112121222111211122122222212221222221221122122222222222222222222223222232222232222222222222112122112121122111211122122122212221222221221122122222222222222221211122112122212221222211222122222232222232222222222222112122112121111111222222112121112121111111222222111121112121111111211122112122112121122111222212111121111121111111111122112122112121122111211122112122212221222221222211111121111121111111222111111121111111111111111122112121112121111111222111111111111111111111111122111121112121111111221122122222212221222221222111011111111111111111111122111121111121111111211122112122112121122211221111011111101111111111111112111121111121111111211122112122112221222211221111011111101111111110111111111121111111111111111122112121112121122111111011111121111111111111111011111111112111111111111011111111111111111111221111011111101110111110111011011111111111111111221111011011101110111110111011011111101111111111211111001011101110111110110011011111101111111111211111001011001010111110110011011111101111111110211111001011001010111100110011011011101110111110211111001011001010011100110011001011101110111110211111001010001010011000100011001011001010111110111111001010001010011000111111111111111111111111100011001011001010111100111111001010001010000000111111000010000010000000100011001011001010011100110011001011001110111110100011001010001010011000110011001011001010111110111100000010000000000000000011001010001010011000111100000000000000000000000011001010001010000000111000000000000000000000000011001010000010000000";function w(t,e){return l[e]+Math.floor(u.charAt(24*(Math.floor(r.charCodeAt(t-1900))-48)+e))}function b(t,e,n,i,a,o,s,l,r,c,u){this.sYear=t,this.sMonth=e,this.sDay=n,this.week=i,this.lYear=a,this.lMonth=o,this.lDay=s,this.isLeap=l,this.cYear=r,this.cMonth=c,this.cDay=u,this.lunarDay=function(t){var e;switch(t){case 10:e="初十";break;case 20:e="二十";break;case 30:e="三十";break;default:e=d[Math.floor(t/10)],e+=v[t%10]}return e}(s),this.lunarMonth=f[o-1],this.lunarYear=h[(a-1900)%12],this.lunarFestival="",this.solarFestival="",this.solarTerms=""}function G(){this.solar2lunar=function(t){var e=t.getFullYear(),n=t.getMonth(),i=t.getDate(),a=v[t.getDay()],o=new s(t);return x(e,n,i,a,o.year,o.month,o.day,o.isLeap)},this.lunar2solar=function(t,e){var n=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),o=new c(t,e),s=o.year,l=o.month,r=o.day;return x(s,l,r,v[new Date(s,l,r).getDay()],n,i,a,o.isLeap)}}function x(t,e,n,i,a,o,s,l){var r,c,u={};r=y(e<2?t-1900+36-1:t-1900+36);var h=w(t,2),v=w(t,2*e);c=y(12*(t-1900)+e+12),1==e&&h<=n&&(r=y(t-1900+36)),v<=n&&(c=y(12*(t-1900)+e+13)),u=new b(t,e+1,n,i,a,o,s,l,r,c,y(Date.UTC(t,e,1,0,0,0,0)/864e5+25567+10+n-1));var d=w(t,2*e)-1,f=w(t,2*e+1)-1;d==n-1&&(u.solarTerms=C[2*e]),f==n-1&&(u.solarTerms=C[2*e+1]);for(var p,_=0;p=m[_];_++)p.match(/^(\d{2})(\d{2})([\s\*])(.+)$/)&&Number(RegExp.$1)==e+1&&Number(RegExp.$2)==n&&(u.solarFestival+=RegExp.$4+" ");for(_=0;p=I[_];_++){if(p.match(/^(\d{2})(\d)(\d)([\s\*])(.+)$/))if(Number(RegExp.$1)==e+1)if(d=Number(RegExp.$2),f=Number(RegExp.$3),d<5)if((0==f?7:0)+7*(d-1)+f==n){u.solarFestival+=RegExp.$5+" ";break}}for(_=0;p=U[_];_++)if(p.match(/^(\d{2})(.{2})([\s\*])(.+)$/)){d=Number(RegExp.$1),f=Number(RegExp.$2);var g=j(a,o);if(d==o&&f==s||"00"==f&&12==o&&g==s){u.lunarFestival+=RegExp.$4+" ";break}}return u}var O="jui-bind",E="jui-change",A=["xl","l","m","s","xs","success","normal","info","warn","danger"];function R(){var t={__proto__:null};return t}function k(t){var e=t.item,n=e.attr(O),i=t.jet,a=t.isDef?i:function(t,e){var n=t.parent();for(;null==n.__jet&&"BODY"!=n.tagName;)n=n.parent();return"BODY"!=n.tagName?n.__jet:e}(e,i);if(n&&n in a._tools._calls){var o,s,l=e.$jui;s=a==i?(o=a._tools._data,a):(o=a._data[a.name],a.data[a.name]),e.hasAttr(E)&&(l._onchange=D(i,l,e.attr(E)));var r=e.hasClass(JUI.RADIO._name)?"checked":"value";if(void 0!==o[n]&&l["_"+r]!==o[n]){if(l.checkValue){var c=l.checkValue(o[n]);c!==o[n]&&(s[n]=c)}l[r]=o[n]}a._tools._calls[n]._func.push(function(t,e){if(l["_"+r]!==e&&void 0!==e){if(l.checkValue){var n=l.checkValue(e);if(n!==e)return void(s[t]=n)}l["_"+r]=e,l.onchange.call(l)}}),T(a,l,r,s,o,n),function(t,e,n,i,a,o){if(t.hasAttr("jui-page-total")){var s=t.attr("jui-page-total"),l="total";null!=a[s]&&n._total!=a[s]&&(n[l]=a[s],n.onchangetotal.call(n)),e._tools._calls[s]._func.push(function(t,e){n._total!=e&&null!=e&&(n._total=e,n.onchangetotal.call(n))}),T(e,n,l,i,a,s)}t.hasAttr("jui-onclose")&&""!==t.attr("jui-onclose")&&(n._onclose=D(o,n,t.attr("jui-onclose")));t.hasAttr("jui-onload")&&""!==t.attr("jui-onload")&&(n._onload=D(o,n,t.attr("jui-onload")),n._onload.call(o));t.hasAttr("callback")&&""!==t.attr("callback")&&(n.ele.code_callback=D(o,n,t.attr("jui-onload")))}(e,a,l,s,o,i),e.removeAttr(O),e._hasInitJui=!0,e.hasClass(JUI.DIALOG._name)&&document.body.append(e)}}function L(t){return t.hasAttr("disabled")&&"false"!==t.attr("disabled")}function D(t,e,n){if(""!==n)return n in(e.jet=t)&&"function"==typeof t[n]?t[n]:window[n]&&"function"==typeof window[n]?window[n]:new Function("opt",n)}function T(t,n,e,i,a,o){Object.defineProperty(n,e,{get:function(){return a[o]},set:function(e){"object"==typeof a[o]?i[o].$replace(e):(n.checkValue&&(e=n.checkValue(e)),a[o]=e),t._tools._calls[o]._func.forEach(function(t){t(o,e)})}})}function P(t,e,n){void 0===t&&(t=n),"string"==typeof t||"number"==typeof t?JUI.msg(t,n,e):(t.type=n,JUI.msg(t))}function M(t,e,n){"string"==typeof t?JUI.confirm(t,e):(t.type=n,JUI.confirm(t))}function B(t){throw new Error(t)}function F(t,e){return t?t.findClass(e):S.cls(e)}function H(t){t.forEach?t.forEach(function(t){H(t)}):t.hasAttr("icon")&&(t.html('<i class="j-icon icon-'+t.attr("icon")+'"></i>'+t.html()),t.removeAttr("icon"))}window.JUI={_jui_mounted:[],init:function(t,e){n=function(){JUI.SELECT.init(t),JUI.RADIO_GROUP.init(t,e),JUI.CHECKBOX_GROUP.init(t,e),JUI.SWITCH.init(t),JUI.DATE.init(t),JUI.COLOR.init(t),JUI.SLIDER.init(t),JUI.DIALOG.init(t),JUI.PAGE.init(t),JUI.TAB.init(t),JUI.SCREEN_DRAG.init(t),JUI.CODE.init(t),JUI.BTN.init(t),JUI.INPUT.init(t),JUI.PROGRESS.init(t),JUI._jui_mounted.forEach(function(t){t()}),n=null},i&&n()},useBind:function(e){var t=e._tools._ele.findAttr(O);t.exist()&&JUI._jui_mounted.push(function(){t.each(function(t){!0!==t.hasBind&&(t.hasBind=!0,t.hasClass(JUI.RADIO._name)&&!JUI.RADIO_GROUP.def_r_group.hasBind?(JUI.RADIO_GROUP.def_r_group.hasBind=!0,JUI.RADIO_GROUP.def_r_group.ele.attr(O,t.attr(O)),k({item:JUI.RADIO_GROUP.def_r_group.ele,jet:e,isDef:!0})):t.hasClass(JUI.CHECKBOX._name)&&!JUI.CHECKBOX_GROUP.def_c_group.hasBind?(JUI.CHECKBOX_GROUP.def_c_group.hasBind=!0,JUI.CHECKBOX_GROUP.def_c_group.ele.attr(O,t.attr(O)),k({item:JUI.CHECKBOX_GROUP.def_c_group.ele,jet:e,isDef:!0,type:JUI.CHECKBOX._name})):k({item:t,jet:e}))}),JUI._jui_mounted.remove(this)})},msg:function(t,e,n){"object"!=typeof t&&(t={text:t,type:e,time:n}),new JUI.MESSAGE(t)},confirm:function(t,e,n){"string"==typeof t&&(t={text:t,onconfirm:e,type:n}),new JUI.CONFIRM(t)},mounted:function(t){JUI._jui_mounted.push(t)}},JUI.msg.success=function(t,e){P(t,e,JUI.MESSAGE.success)},JUI.msg.warn=function(t,e){P(t,e,JUI.MESSAGE.warn)},JUI.msg.error=function(t,e){P(t,e,JUI.MESSAGE.error)},JUI.msg.info=function(t,e){P(t,e,JUI.MESSAGE.info)},JUI.msg.close=function(){0<JUI.MESSAGE.msgList.length&&JUI.MESSAGE.msgList[0].close()},JUI.msg.isOpen=function(){return 0<JUI.MESSAGE.msgList.length},JUI.msg.clear=function(){JUI.MESSAGE.msgList.forEach(function(t){t.close()})},JUI.confirm.isOpen=function(){return 0<JUI.CONFIRM.confirmList.length},JUI.confirm.clear=function(){JUI.CONFIRM.confirmList.forEach(function(t){t.close()})},JUI.confirm.success=function(t,e){M(t,e,JUI.CONFIRM.success)},JUI.confirm.warn=function(t,e){M(t,e,JUI.CONFIRM.warn)},JUI.confirm.error=function(t,e){M(t,e,JUI.CONFIRM.error)},JUI.confirm.info=function(t,e){M(t,e,JUI.CONFIRM.info)},JUI.confirm.close=function(){0<JUI.CONFIRM.confirmList.length&&JUI.CONFIRM.confirmList[0].close()},JUI.SELECT=function(t){this.ele=t.ele||null,this.options=t.options||{},this.onchange=t.onchange||function(){},this._value=t.value||"",this.text=t.text||"";var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){e._value=t,e.onchange.call(e)}})},JUI.SELECT.prototype=R(),JUI.SELECT._name="j-select",JUI.SELECT.option_txt="j-option",JUI.SELECT.init=function(t){F(t,this._name).each(function(e){if(!e._hasInitJui){e._hasInitJui=!0,ut(e);var i=new JUI.SELECT({ele:e}),t=e.child(),n=t[0],a=S.ct("div.j-option-w"),o=S.ct("div.j-select-vw"),s=S.ct("span.j-select-v"),l=S.ct("i.j-icon.icon-caret-down");o.append([s,l]),i.onchange=function(){if(this.text=this.options[this.value],s.txt(this.text),e.attr("value",this.value),i._onchange){var t=i.jet||i;i._onchange.call(t,{ele:e,value:i._value,jui:i})}},t.each(function(t){H(t),a.append(t),t.hasAttr("default")&&(n=t),t.hasAttr("disabled")&&t.addClass("c-disabled");var e=N(t);""==e&&B("SELECT:value值不能设置为空"),i.options[e]=$(t)}),a.clk(function(t){var e=t.target;e.hasClass("j-option")||(e=e.parent()),e.hasClass("j-option")&&!e.hasClass("c-disabled")&&(i.value=N(e))}),n&&(i.value=N(n)),e.append([a,o]).clk(function(){L(this)||(this.child(0).toggleClass("s-open"),this.child(1).child(1).toggleClass("s-open"))},!0),e.$jui=i,void 0!==e.__jet&&"Jfor"===e.__jet.type&&((e.__jet.originEle=e).__jet.ele=e.children[0],e.__jet.__addSelectOption=function(t,e){H(t);var n=N(t);!0===e?(void 0===i.options[n]&&delete i.options[n],i._value===n&&(i.value="")):(void 0===i.options[n]&&(i.options[n]=$(t)),1===a.child().length&&(i.value=n))})}})};var N=function(t){return t.hasAttr("value")?t.attr("value"):$(t)},$=function(t){return t.hasAttr("jhtml")?t.html().trim():(""===t.innerText?t.html():t.txt()).trim()};function X(n,t){var i;!t&&0<n.findClass(JUI.RADIO_GROUP._name).length&&B("radio group 不支持嵌套使用"),t?(JUI.RADIO_GROUP.def_r_group=new JUI.RADIO_GROUP({ele:S.ct("div."+JUI.RADIO_GROUP._name)}),(i=JUI.RADIO_GROUP.def_r_group).ele.$jui=i):(i=new JUI.RADIO_GROUP({ele:n}),n.$jui=i),i.onchange=function(){i.ele.attr("value",i._value);var t=i.radioList.filter(function(t){return t.ele.hasClass("j-checked")});if(0<t.length&&(t[0].$checked=!1),0<(t=i.radioList.filter(function(t){return t.value==i.value})).length&&0==t[0]._checked&&(t[0].$checked=!0),i._onchange){var e=i.jet||i;i._onchange.call(e,{ele:n,value:i._value,jui:i})}};var a=[];n.findClass(JUI.RADIO._name).each(function(t){if(!t._hasInitJui){var e=N(t);-1!=a.indexOf(e)&&B("同一组 radio 中不允许有相同的value值"),a.push(e),t._hasInitJui=!0;var n=new JUI.RADIO({ele:t,text:$(t),value:e,group:i});n.checked&&(i.value=n.value)}})}JUI.MESSAGE=function(t){this.text=void 0===t.text?"提示文字为空":t.text,this.type=t.type||JUI.MESSAGE.info,this.time=t.time||2300,this.hover=t.hover||!0,this.autoClose=t.autoClose,this.call=t.call||null,this.html=t.html||!1,this.init(),this.timer=null,0!=this.autoClose&&this.start()},JUI.MESSAGE.prototype=R(),JUI.MESSAGE.prototype.pause=function(){clearTimeout(this.timer)},JUI.MESSAGE.prototype.start=function(){var t=this;this.timer=setTimeout(function(){t.close()},this.time)},JUI.MESSAGE.prototype.init=function(){var t=this;this.ele=S.ct("div.j-msg-w."+this.type);var e=S.ct("i.j-icon.icon-"+JUI.MESSAGE.res.icon[this.type]+".j-msg-i"),n=S.ct("i.j-icon.icon-times.j-msg-close");n.clk(function(){t.close()});var i=S.ct("div.j-msg-txt");!0===t.html?i.html(this.text):i.txt(this.text),this.ele.append([e,n,i]),S.body().append(this.ele),JUI.MESSAGE.msgList.push(this),setTimeout(function(){t.ele.addClass("msg-open")},30),this.hover&&(t.ele.onmouseenter=function(){t.pause()},t.ele.onmouseleave=function(){t.start()})},JUI.MESSAGE.prototype.close=function(){this.ele.removeClass("msg-open"),clearTimeout(this.timer);var t=this;setTimeout(function(){t.ele.remove(),t.call&&t.call(),JUI.MESSAGE.msgList.splice(JUI.MESSAGE.msgList.indexOf(t),1)},300)},JUI.MESSAGE.msgList=[],JUI.MESSAGE.success="success",JUI.MESSAGE.warn="warn",JUI.MESSAGE.error="error",JUI.MESSAGE.info="info",JUI.MESSAGE.res={color:{success:"#2ac32f",warn:"#dfa02b",error:"#dc5454",info:"#9e9e9e"},icon:{success:"check-circle",warn:"exclamation-sign",error:"remove-sign",info:"info-sign"}},JUI.CONFIRM=function(t){this.title=t.title||"确认框",this.text=t.text||"是否确认该操作？",this.type=t.type||null,this.onconfirm=t.onconfirm||null,this.oncancel=t.oncancel||null,this.onclose=t.onclose||null,this.html=t.html||!1,this.width=t.width||null,this.init()},JUI.CONFIRM.prototype=R(),JUI.CONFIRM.prototype.init=function(){var t=this;this.ele=S.ct("div.j-confirm");var e=S.ct("i.j-confirm-close.j-icon.icon-times"),n=S.ct("div.j-confirm-t");null!=this.type&&n.addClass(this.type).append(S.ct("i.j-icon.icon-"+JUI.CONFIRM.res.icon[this.type])),n.append(S.ct("span").txt(this.title));var i=S.ct("div.j-confirm-c");!0===t.html?i.html(this.text):i.txt(this.text);var a=S.ct("div.j-confirm-bw"),o=S.ct("button.j-confirm-b.j-btn").txt("确定"),s=S.ct("button.j-confirm-b.j-btn.info").txt("取消");a.append([o,s]),this.ele.append([e,n,i,a]),e.clk(function(){t.close()}),o.clk(function(){t.onconfirm&&t.onconfirm(),t.close()}),s.clk(function(){t.oncancel&&t.oncancel(),t.close()}),S.body().append(this.ele),new JUI.SCREEN_DRAG({ele:this.ele,drag:this.ele,type:"confirm"}),JUI.CONFIRM.confirmList.push(this)},JUI.CONFIRM.prototype.close=function(){this.ele.addClass("j-confirm-hide");var t=this;t.onclose&&t.onclose(),setTimeout(function(){t.ele.remove(),JUI.CONFIRM.confirmList.splice(JUI.CONFIRM.confirmList.indexOf(t),1)},500)},JUI.CONFIRM.confirmList=[],JUI.CONFIRM.success="success",JUI.CONFIRM.warn="warn",JUI.CONFIRM.error="error",JUI.CONFIRM.info="info",JUI.CONFIRM.res={color:{success:"#2ac32f",warn:"#dfa02b",error:"#dc5454",info:"#9e9e9e"},icon:{success:"check-circle",warn:"exclamation-sign",error:"remove-sign",info:"info-sign"}},JUI.RADIO_GROUP=function(t){this.ele=t.ele||null,this._value=t.value||"",this.onchange=t.onchange||function(){};var e=this;this.radioList=[],Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){e._value=t,e.onchange.call(e)}})},JUI.RADIO_GROUP.prototype=R(),JUI.RADIO_GROUP.prototype.removeAll=function(){this.value=[],this.radioList=[]},JUI.RADIO_GROUP.prototype.remove=function(t){"number"==typeof t?this.radioList.removeByIndex(t):this.radioList.remove(t)},JUI.RADIO_GROUP.prototype.clear=function(){this.radioList.forEach(function(t){t.checked=!1}),this.value=[]},JUI.RADIO_GROUP._name="j-radio-group",JUI.RADIO_GROUP.def_r_group=null,JUI.RADIO_GROUP.init=function(t,e){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,X(t))}),!0===e?F(t,JUI.RADIO._name).each(function(t){t._hasInitJui||JUI.RADIO.init({ele:t,group:z(t,JUI.RADIO_GROUP._name)})}):X(S.body(),!0)};function K(t){return t?t.attr("jui-type"):null}function Y(t,e){if(null===t)return e;switch(t){case"bool":return"true"===e;case"number":return parseFloat(e);case"string":return e.toString();default:return e}}function z(t,e){for(var n=t.parent();!n.hasClass(e)&&"BODY"!=n.tagName;)n=n.parent();return"BODY"==n.tagName?null:n.$jui}function V(e,t){var n;!t&&0<e.findClass(JUI.CHECKBOX_GROUP._name).length&&B("checkbox group 不支持嵌套使用"),t?(null===JUI.CHECKBOX_GROUP.def_c_group&&(JUI.CHECKBOX_GROUP.def_c_group=new JUI.CHECKBOX_GROUP({ele:S.ct("div."+JUI.CHECKBOX_GROUP._name)})),(n=JUI.CHECKBOX_GROUP.def_c_group).ele.$jui=n):(n=new JUI.CHECKBOX_GROUP({ele:e}),e.$jui=n),n.onchange=function(){if(n.ele.attr("value",n._value.toString()),n.checkList.forEach(function(t){n.value.has(t.value)?0==t._checked&&(t.$checked=!0):1==t._checked&&(t.$checked=!1)}),n._onchange){var t=n.jet||n;n._onchange.call(t,{ele:e,value:n._value,jui:n})}},e.findClass(JUI.CHECKBOX._name).each(function(t){if(!t._hasInitJui){t._hasInitJui=!0;var e=new JUI.CHECKBOX({ele:t,text:$(t),group:n});e.checked&&n.value.push(e.value)}})}function W(t){return t.has(" ")?t.split(" ")[0]:t}function q(t){return t.has(" ")?t.split(" ")[1]:"00:00:00"}function Q(t){var e=t||new Date;return e.getFullYear?e.getFullYear()+"-"+et(e.getMonth()+1)+"-"+et(e.getDate()):e.year+"-"+et(e.month)+"-"+et(e.day)}function Z(t){return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}function tt(t){if(/^(([12]\d{3}-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2]\d)|3(0|1))))$/.test(W(t))){var e=t.split("-");return{year:parseInt(e[0]),month:parseInt(e[1]),day:parseInt(e[2])}}return{}}function et(t){return t<10?"0"+t:t}function nt(t,e,n,i){var a;return a="object"==typeof e?e.getFullYear?e:new Date(e.year,e.month-1,e.day):new Date(e,n-1,i),null===t.max&&null===t.min||(null!==t.max&&new Date(t.max.year,t.max.month-1,t.max.day)<a?"1":!(null!==t.min&&new Date(t.min.year,t.min.month-1,t.min.day)>a)||"-1")}function it(i,a,o,s,l,r,c,u){var h=!1;a.empty();var v=tt(i._value);(function(t,e){for(var n=[],i=(l=t,r=e,new Date(l,r-1,1).getDay()),a=ot(t,e),o=1==e?ot(t-1,12):ot(t,e-1),s=o-i+1;s<=o;s++)n.push(s);var l,r;for(var s=1;s<=a;s++)n.push(s);for(var c=(u=t,h=e,new Date(u,h,0).getDay()),s=1;s<=6-c;s++)n.push(s);var u,h;return n})(o,s).forEach(function(t){1!=t||h?1==t&&h&&(h=!1):h=!0;var e,n=!0===nt(i,o,s,t);h&&n?e=S.ct("div.j-date-si"+(l&&t==i.today.getDate()?".j-date-current":"")+(v.year==o&&v.month==s&&v.day==t?".j-active":"")).txt(t).clk(function(){at({year:parseInt(r.val()),month:parseInt(c.val()),day:t},i,this.parent())}):(u||(r.val(v.year),c.val(et(v.month))),e=S.ct("div.j-date-si.j-disabled").txt(t),!n&&h&&e.addClass("j-date-overflow").clk(function(){JUI.msg.warn("选择的日期超过了限制的范围")})),h&&!0===i.detail&&e.on({mouseenter:function(){i.showDetail(t)},mouseleave:function(){i.hideDetail()}}),a.append(e)})}function at(t,e,n){e._date=t;var i=Q(e._date);n.findClass("j-active").removeClass("j-active"),e.needTime?(e.showTime(),e.value=i+" "+e._value.split(" ")[1]):(e.value=i,e.close())}function ot(t,e){return new Date(t,e,0).getDate()}function st(t,e){var n=function(t){{if(t=t.toLowerCase(),lt.test(t))return"sixteen";if(t.has("rgb")){var n=!0,e=t.substring(t.indexOf("(")+1,t.indexOf(")")).split(",");return 3!=e.length&&4!=e.length?n=!1:e.each(function(t){var e=parseInt(t);("NaN"==e.toString()||e<0||255<e)&&(n=!1)}),n?t.has("rgba")?"rgba":"rgb":"not"}}}(t);return!("not"==n||("sixteen"!=n&&"rgb"!=n||e)&&("rgba"!=n||!e))}JUI.RADIO=function(t){this.ele=t.ele||null,this._checked=t.checked||!1,this.onchange=t.onchange||function(){},this.text=t.text||"",this.group=t.group||null,this._juiType=K(t.ele),this.value=Y(this._juiType,t.value||N(t.ele));var e=this;Object.defineProperties(e,{checked:{configurable:!0,get:function(){return e._checked},set:function(t){"boolean"!=typeof t&&B("radio.checked只支持布尔类型"),e._checked!=t&&(e._checked=t,e.group.value=1==t?e.value:"",e.onchange.call(e))}},$checked:{configurable:!0,get:function(){return e._checked},set:function(t){e._checked=t,e.onchange.call(e)}}}),this.init()},JUI.RADIO.prototype=R(),JUI.RADIO.prototype.init=function(){var e=this,n=this.ele;H(n),n.html('<div class="j-radio-cw"><div class="j-radio-c"></div></div><span class="j-radio-t">'+n.html().trim()+"</span>"),n.clk(function(){L(this)||(e.group.value=e.value)},!0),e.onchange=function(){if(e.checked?e.ele.addClass("j-checked"):e.ele.removeClass("j-checked"),e.ele.attr("checked",e.checked),e._onchange){var t=e.jet||e;e._onchange.call(t,{ele:n,value:e._value,jui:e})}},n.hasAttr("checked")&&"false"!=n.attr("checked")&&""==this.group.value?(e.checked=!0,this.group.value,e.value):n.attr("checked","false"),n.$jui=e,this.group.radioList.push(e)},JUI.RADIO.init=function(t){if(!t.ele._hasInitJui){t.ele._hasInitJui=!0;var e=t.group||JUI.RADIO_GROUP.def_r_group;new JUI.RADIO({ele:t.ele,text:$(t.ele),group:e})}},JUI.RADIO._name="j-radio",JUI.CHECKBOX_GROUP=function(t){this.ele=t.ele||null,this._value=t.value||[],this.onchange=t.onchange||function(){};var e=this;this.checkList=[],Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){e._value=t,e.onchange.call(e)}})},JUI.CHECKBOX_GROUP.prototype=R(),JUI.CHECKBOX_GROUP.prototype.selectAll=function(){return this.checkList.forEach(function(t){t.checked=!0}),this.value},JUI.CHECKBOX_GROUP.prototype.clear=function(){this.checkList.forEach(function(t){t.checked=!1}),this.value=[]},JUI.CHECKBOX_GROUP.prototype.remove=function(t){"number"==typeof t?this.checkList.removeByIndex(t):this.checkList.remove(t)},JUI.CHECKBOX_GROUP.prototype.removeAll=function(){this.value=[],this.checkList=[]},JUI.CHECKBOX_GROUP._name="j-checkbox-group",JUI.CHECKBOX_GROUP.def_c_group=null,JUI.CHECKBOX_GROUP.init=function(t,e){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,V(t))}),!0===e?F(t,JUI.CHECKBOX._name).each(function(t){t._hasInitJui||JUI.CHECKBOX.init({ele:t,group:z(t,JUI.CHECKBOX_GROUP._name)})}):V(S.body(),!0)},JUI.CHECKBOX=function(t){this.ele=t.ele||null,this._checked=t.checked||!1,this.onchange=t.onchange||function(){},this.text=t.text||"",this.group=t.group||null,this._juiType=K(t.ele),this.value=Y(this._juiType,t.value||N(t.ele));var e=this;Object.defineProperties(e,{checked:{configurable:!0,get:function(){return e._checked},set:function(t){"boolean"!=typeof t&&B("checkbox.checked只支持布尔类型"),e._checked!=t&&((e._checked=t)?e.group.value.has(e.value)||e.group.value.push(e.value):e.group.value.has(e.value)&&e.group.value.removeByIndex(e.group.value.indexOf(e.value)),e.onchange.call(e))}},$checked:{configurable:!0,get:function(){return e._checked},set:function(t){e._checked=t,e.onchange.call(e)}}}),this.init()},JUI.CHECKBOX.prototype=R(),JUI.CHECKBOX.prototype.init=function(){var e=this,n=this.ele;H(n),n.html('<div class="j-checkbox-cw"><i class="j-icon icon-check j-checkbox-c"></i></div><span class="j-checkbox-t">'+n.html().trim()+"</span>"),n.clk(function(){if(!L(this)){var t=e.group._value.clone();t.has(e.value)?t.remove(e.value):t.push(e.value),e.group.value=t}},!0),e.onchange=function(){if(e.checked?e.ele.addClass("j-checked"):e.ele.removeClass("j-checked"),e.ele.attr("checked",e.checked),e._onchange){var t=e.jet||e;e._onchange.call(t,{ele:n,value:e._value,jui:e})}},n.hasAttr("checked")&&"false"!=n.attr("checked")&&""==this.group.value?(e.checked=!0,this.group.value,e.value):n.attr("checked","false"),n.$jui=e,this.group.checkList.push(e)},JUI.CHECKBOX.init=function(t){if(!t.ele._hasInitJui){t.ele._hasInitJui=!0;var e=t.group||JUI.CHECKBOX_GROUP.def_c_group;new JUI.CHECKBOX({ele:t.ele,group:e})}},JUI.CHECKBOX._name="j-checkbox",JUI.SWITCH=function(t){this.ele=t.ele||null,this._value=t.value||!1,this.onchange=t.onchange||function(){},this._juiType=K(this.ele),this.value=Y(this._juiType,t.value||""),this._valueList=t._valueList||[];var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){t=Y(e._juiType,t),e._valueList.has(t)&&t!=e.value&&(e._value=t,e.onchange())}}),this.init()},JUI.SWITCH.prototype=R(),JUI.SWITCH.prototype.init=function(){var t,e,n=this,i=this.ele,a=null,o=i.child(),s=S.ct("div.j-switch-c");ut(i,function(t){a=t,i.hasClass("j-s-on")&&s.css("left",t-s.wid()-2+"px")});var l=function(){i.addClass("j-s-on"),null!=a&&s.css("left",a-s.wid()-2+"px")};if(1<o.length){2<o.length&&B("switch 组件只能有两个元素");var r=N(o[0]);""===r&&(r=!0),this._valueList.push(r),t=S.ct("div.j-switch-t.j-st-on").txt($(o[0])).attr("value",r),""===(r=N(o[1]))&&(r=!1),this._valueList[0]==r&&B("switch 两个元素值不能相等"),this._valueList.push(r),this._value=r,e=S.ct("div.j-switch-t.j-st-off").txt($(o[1])).attr("value",r),o[0].hasAttr("icon")&&t.attr("icon",o[0].attr("icon")),o[1].hasAttr("icon")&&e.attr("icon",o[1].attr("icon"));var c=o[0].hasAttr("checked");i.empty(),i.append([t,e,s]),c&&(l(),this._value=this._valueList[0])}else i.empty(),this._valueList=[!0,!1],this._value=!1,t=S.ct("div.j-switch-t.j-st-on").attr("value","true"),e=S.ct("div.j-switch-t.j-st-off").attr("value","false"),this._valueList=[!0,!1],i.append([t,e,s]),i.hasAttr("on")&&(this._value=!0,l(),i.removeAttr("on"));H([t,e]),i.attr("value",this._value),i.clk(function(){L(i)||(0==n._valueList.indexOf(n._value)?n.value=n._valueList[1]:n.value=n._valueList[0])},!0),n.onchange=function(){if(0==n._valueList.indexOf(n._value)?l():(i.removeClass("j-s-on"),null!=a&&s.css("left","1px")),i.attr("value",n._value),n._onchange){var t=n.jet||n;n._onchange.call(t,{ele:i,value:n._value,jui:n})}},i.$jui=n},JUI.SWITCH._name="j-switch",JUI.SWITCH.init=function(t){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,new JUI.SWITCH({ele:t}))})},JUI.DATE=function(t){var e=new Date;if(this.today=e,this.ele=t.ele||null,this.needTime=!1,this.detail="true"===this.ele.attr("jui-date-detail"),this._time={h:0,m:0,s:0},"true"===t.ele.attr("jui-date-time")&&(this.needTime=!0),!t.value){var n=this.ele.attr("value");null===n?(t.value=Q(e),this.needTime&&(t.value+=" 00:00:00")):t.value=n}this._value=t.value||"",this.onchange=t.onchange||function(){},this._date=Z(e);var i=this;this.max=this.ele.attr("jui-date-max"),this.min=this.ele.attr("jui-date-min"),"today"===this.max?this.max=tt(Q(e)):"string"==typeof this.max&&(this.max=tt(this.max)),"today"===this.min?this.min=tt(Q(e)):"string"==typeof this.min&&(this.min=tt(this.min)),Object.defineProperty(i,"value",{configurable:!0,get:function(){return i._value},set:function(t){i._value=t,i.onchange()}}),this.init()},JUI.DATE.prototype=R(),JUI.DATE.prototype.init=function(){var a=this,o=this.ele,n=S.ct("div.j-date-allw"),t=S.ct("i.j-icon.icon-times.j-date-close"),i=S.ct("div.j-date-w"),e=S.ct("div.j-date-t.j-clearfix"),s=S.ct("div.j-date-ty"),l=S.ct("i.j-icon.icon-angle-left.j-date-icon"),r=S.ct("input.j-date-input[attr=text][value="+this._date.year+"]"),c=S.ct("i.j-icon.icon-angle-right.j-date-icon");s.append([l,r,c]);var u=S.ct("div.j-date-ty"),h=S.ct("i.j-icon.icon-angle-left.j-date-icon"),v=S.ct("input.j-date-input[attr=text][value="+et(this._date.month)+"]"),d=S.ct("i.j-icon.icon-angle-right.j-date-icon");u.append([h,v,d]),l.clk(function(){var t=parseInt(r.val())-1,e=parseInt(v.val());l.next().val(t),it(a,p,t,e,t==a._date.year&&e==a._date.month,r,v,!0)}),c.clk(function(){var t=parseInt(r.val())+1,e=parseInt(v.val());c.prev().val(t),it(a,p,t,e,t==a._date.year&&e==a._date.month,r,v,!0)}),h.clk(function(){var t=parseInt(r.val()),e=parseInt(v.val());e=e<=1?12:e-1,h.next().val(et(e)),it(a,p,t,e,t==a._date.year&&e==a._date.month,r,v,!0)}),d.clk(function(){var t=parseInt(r.val()),e=parseInt(v.val());e=11<e?1:e+1,d.prev().val(et(e)),it(a,p,t,e,t==a._date.year&&e==a._date.month,r,v,!0)}),r.on("input",function(){if(/^([12]\d{3})$/.test(this.val())){var t=parseInt(this.val()),e=parseInt(v.val());it(a,p,t,e,t==a._date.year&&e==a._date.month,r,v,!0)}}),v.on("input",function(){var t=parseInt(this.val());if(0<t&&t<13){var e=parseInt(r.val());it(a,p,e,t,e==a._date.year&&t==a._date.month,r,v,!0),this.val(et(t))}}),e.append([s,u]);var f=S.ct("div.j-date-dw.j-clearfix");["日","一","二","三","四","五","六"].forEach(function(t){f.append(S.ct("div.j-date-di").txt(t))});var p=S.ct("div.j-date-sw.j-clearfix"),_=S.ct("div.j-date-today").txt("今:"+Q(a.today));if(_.on({click:function(){!0===nt(a,a.today)?at(Z(a.today),a,this.prev()):JUI.msg.warn("选择的日期超过了限制的范围")},mouseenter:function(){var t=Z(a.today);a.showDetail(t.day,t.year,t.month)},mouseleave:function(){a.hideDetail()}}),i.append([e,f,p,_]),ut(o,function(t){n.css({width:"100%",left:"0"})}),!0===this.detail){var g=S.ct("div.j-date-detail"),m=new G;a.showDetail=function(t,e,n){g.empty(),e=e||r.val(),n=parseInt(n||v.val());var i=m.solar2lunar(new Date(e,n-1,t)),a=[];a.push("<div>"+e+"年"+n+"月"+t+"日 周"+i.week+"</div>");var o="";""!==i.solarFestival&&(o+=i.solarFestival+" "),""!==i.lunarFestival&&(o+=i.lunarFestival),""!==o&&a.push("<div><span>节日: </span>"+o+"</div>"),a.push('<div class="j-date-no-b"><span>农历:</span><br>'+i.lYear+"("+i.lunarYear+")年"+i.lunarMonth+"月"+i.lunarDay+"</div>"),a.push("<div></div>"),a.push("<div>["+i.cYear+"年"+i.cMonth+"月"+i.cDay+"日]</div>"),""!==i.solarTerms&&a.push("<div><span>节气: </span>"+i.solarTerms+"</div>"),g.html(a.join("")),g.show()},a.hideDetail=function(){g.hide()},i.append(g)}n.append([i,t]);var I=/^((0[0-9])|(1[0-9])|(2[0-3])):([0-5][0-9]):([0-5][0-9])$/;if(this.needTime){var U=S.ct("div.j-time-w"),J=S.ct("div.j-tt-w"),j=S.ct("div.j-tt-info.j-clearfix");j.append([S.ct("div").txt("时"),S.ct("div").txt("分"),S.ct("div").txt("秒")]),J.append([S.ct("div").txt("选择时间"),j]);for(var y=S.ct("div.j-tc-w.j-clearfix"),C=S.ct("div.j-ti-w"),w=0;w<24;w++)C.append(S.ct("div").txt(et(w)));var b=S.ct("div.j-ti-w");for(w=0;w<60;w++)b.append(S.ct("div").txt(et(w)));var x=S.ct("div.j-ti-w");for(w=0;w<60;w++)x.append(S.ct("div").txt(et(w)));y.append([C,b,x]),y.child().clk(function(t){var e=t.target.txt();switch(this.attr("value",e),this.findClass("j-active").removeClass("j-active"),t.target.addClass("j-active"),this.index()){case 0:a._time.h=parseInt(e);break;case 1:a._time.m=parseInt(e);break;case 2:a._time.s=parseInt(e)}a.value=a._value.split(" ")[0]+" "+et(a._time.h)+":"+et(a._time.m)+":"+et(a._time.s)});var O=S.ct("div.j-tb-w"),E=S.ct("button.j-btn.info.xs").txt("返回日期");E.clk(function(){it(a,p,a._date.year,a._date.month,!0,r,v),U.hide(),i.show()});var A=S.ct("button.j-btn.xs").txt("现在");A.clk(function(){var t=new Date;a._date=Z(t),a._time={h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()},a._value=Q(a._date),a.setTime(et(a._time.h)+":"+et(a._time.m)+":"+et(a._time.s))});var R=S.ct("button.success.j-btn.xs").txt("确定");R.clk(function(){a.close()}),O.append([E,A,R]),U.append([J,y,O]),n.append(U),a.setTime=function(t){if(I.test(t)){var e=t.split(":");a._time={h:parseInt(e[0]),m:parseInt(e[1]),s:parseInt(e[2])},a.value=a._value.split(" ")[0]+" "+t,y.findClass("j-active").removeClass("j-active"),C.attr("value",e[0]).child(a._time.h).addClass("j-active"),C.scrollTop=22*a._time.h,b.attr("value",e[1]).child(a._time.m).addClass("j-active"),b.scrollTop=22*a._time.m,x.attr("value",e[2]).child(a._time.s).addClass("j-active"),x.scrollTop=22*a._time.s}},a.showTime=function(){U.show(),i.hide(),a.setTime(a._value.split(" ")[1])}}var k=S.ct("input.j-date-v[type=text]");o.append([n,k]);var D=/^(([12]\d{3}-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2]\d)|3(0|1))))$/;a.onchange=function(){var t=a._value,e=new Date;e.getDate()!==a.today.getDate()&&(a.today=e,_.txt("今:"+Q(e)));var n=nt(a,tt(a._value));if(!0!==n&&("1"===n?a._value=Q(a.max):"-1"===n&&(a._value=Q(a.min)),a.needTime&&(a._value+=" "+t.split(" ")[1]),t=a._value,a.value=a._value),D.test(W(t))&&I.test(q(t))&&(!0!==a.isFromInput?k.val(t):a.isFromInput=!1,o.attr("value",t),a._onchange)){var i=a.jet||a;a._onchange.call(i,{ele:o,value:t,jui:a})}},o.$jui=a,L(o)&&k.attr("readonly","true"),k.clk(function(t){if(L(o))k.attr("readonly","true");else if(k.removeAttr("readonly"),!o.hasClass("j-active"))if(n.css("display","block"),"none"===i.css("display")&&(i.show(),U.hide()),setTimeout(function(){o.addClass("j-active")},30),D.test(W(a._value))){var e=tt(a._value);it(a,p,e.year,e.month,e.year==a._date.year&&e.month==a._date.month,r,v)}else it(a,p,a._date.year,a._date.month,!0,r,v)},!0),k.oninput=function(){if(D.test(W(this.val()))&&I.test(q(this.val())))if(this.css("color","#222"),!0===nt(a,tt(this.val()))&&(a.isFromInput=!0),a.value=this.val(),a.needTime&&"none"===i.css("display"))a.setTime(q(a._value));else{var t=tt(a._value);it(a,p,t.year,t.month,t.year==a._date.year&&t.month==a._date.month,r,v)}else this.css("color","#d44")},t.clk(function(){a.close()}),this.value=this._value},JUI.DATE.prototype.close=function(){if(this.ele.hasClass("j-active")){var t=this;this.ele.removeClass("j-active"),setTimeout(function(){t.ele.child(0).css("display","none")},300),this.ele.child(1).css("cursor","pointer")}},JUI.DATE._name="j-date",JUI.DATE.init=function(t){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,new JUI.DATE({ele:t}))})},JUI.DRAG=function(t){this.ele=t.ele,this.par=t.par||this.ele.parent(),this._w=this.ele.wid()/2,this._h=this.ele.hei()/2,this.x=t.x||-this._w,this.y=t.y||-this._h,this.mode=t.mode||"xy",this.onchange=t.onchange||function(){},this.init()},JUI.DRAG.prototype=R(),JUI.DRAG.prototype.init=function(){var u=this;this.setPosition(),this.par.on("mousedown",function(t){var e=t||event,a=u.par.wid(),o=u.par.hei(),s=u.ele.wid(),l=u.ele.hei(),n=u.par.getBoundingClientRect();u.x=e.clientX-n.left,u.y=e.clientY-n.top,u.setPosition();var r=e.clientX-u.ele.offsetLeft,c=e.clientY-u.ele.offsetTop;return u.par.onmousemove=function(t){var e=t||event,n=e.clientX-r,i=e.clientY-c;return n<-s/2?n=-s/2:a-s/2<n&&(n=a-s/2),i<-l/2?i=-l/2:o-l/2<i&&(i=o-l/2),u.setPosition(n,i),!1},u.par.onmouseleave=function(){},!(u.par.onmouseup=function(){u.par.onmousemove=null,u.par.onmouseup=null})}),document.documentElement.on("mousemove",function(t){u.par.onmousemove&&u.par.onmousemove(t)},!0),document.documentElement.on("mouseup",function(t){u.par.onmouseup&&u.par.onmouseup(t)},!0)},JUI.DRAG.prototype.setPosition=function(t,e,n){t&&(this.x=t),e&&(this.y=e);var i={x:(this.x+this._w)/this.par.wid(),y:(this.y+this._h)/this.par.hei()};"x"==this.mode?(this.y=e=0,delete i.y):"y"==this.mode&&(this.x=t=0,delete i.x),null==n&&this.onchange(i),this.ele.css({left:this.x+"px",top:this.y+"px"})},JUI.DRAG.prototype.setPositionByRate=function(t,e){this.setPosition(t*this.par.wid()-this._w,e*this.par.hei()-this._h,!1)},JUI.COLOR=function(t){this.ele=t.ele||null,this._value=t.value||"",this.onchange=t.onchange||function(){},this.value=t.value||"",this.showAlp=t.ele.hasAttr("alpha")&&"false"!=t.ele.attr("alpha"),this._alpha=1,this._showColor={r:255,g:0,b:0},this._rangeColor={r:255,g:0,b:0,dr:0,dg:255,db:255},this._rate={x:1,y:0};var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){e._value=t,e.onchange()}}),this.init(),""==this._value&&(this.showAlp?this.value=function(t,e){{if("a"in t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a+")";if(null!=e)return"rgba("+t.r+","+t.g+","+t.b+","+e+")"}return"rgb("+t.r+","+t.g+","+t.b+")"}(this._showColor,this._alpha):this.value=ct(this._showColor))},JUI.COLOR.prototype=R(),JUI.COLOR.prototype.init=function(){var l=this,e=this.ele,t=S.ct("div.j-color-w"),r=S.ct("div.j-color-pick"),n=S.ct("div.j-color-cover1"),i=S.ct("div.j-color-cover2"),a=S.ct("div.j-color-pick-s"),o=S.ct("div.j-color-cover-a");r.append([n,i,a,o]);var s=S.ct("div.j-color-range"),c=S.ct("div.j-color-range-s"),u=S.ct("div.j-color-range-a");s.append([c,u]),t.append([r,s]);var h=S.ct("div.j-color-bg");if(this.showAlp){var v=S.ct("div.j-color-alp"),d=S.ct("div.j-color-alp-color"),f=S.ct("div.j-color-alp-s"),p=S.ct("div.j-color-alp-a");v.append([d,f,p]),t.append(v),e.addClass("j-color-bg-alp")}var _=S.ct("div.j-color-vw"),g=S.ct("input.j-color-v.j-input.s"),m=S.ct("div.j-color-btn.j-btn.s.info").txt("清空"),I=S.ct("div.j-color-btn.j-btn.s").txt("确定");_.append([g,m,I]),t.append(_);var U=S.ct("i.j-icon.j-color-icon.icon-chevron-down");e.append([t,h,U]);var J=function(t){null==t&&(t=l.showAlp?"rgba("+l._showColor.r+","+l._showColor.g+","+l._showColor.b+","+l._alpha+")":ct(l._showColor)),l._isFromInput?l._isFromInput=!1:g.val(t),h.css("background-color",t);var e=l._rangeColor;r.css("background-color","rgb("+e.r+","+e.g+","+e.b+")"),l.showAlp&&d.css("background","linear-gradient(to right, rgba("+e.r+", "+e.g+", "+e.b+", 0) 0%, rgb("+e.r+", "+e.g+", "+e.b+") 100%)")},j=function(){l.ele.hasClass("j-active")&&(l.ele.removeClass("j-active"),setTimeout(function(){l.ele.child(0).css("display","none")},300))};m.clk(function(){l.showAlp?l.value="rgba(255,255,255,0)":l.value="#ffffff",j()}),I.clk(function(){l.value=g.val(),j()}),U.clk(function(){L(e)||(e.hasClass("j-active")?(l.value=g.val(),j()):(t.css("display","block"),setTimeout(function(){e.addClass("j-active")},30),l.onchange()))},!0);var y=new JUI.DRAG({ele:a,par:o,onchange:function(t){t.x=1-t.x,l._rate.x=t.x,l._rate.y=t.y,l._showColor.r=parseInt(l._rangeColor.r+t.x*l._rangeColor.dr),l._showColor.g=parseInt(l._rangeColor.g+t.x*l._rangeColor.dg),l._showColor.b=parseInt(l._rangeColor.b+t.x*l._rangeColor.db),l._showColor.r=parseInt(l._showColor.r-t.y*l._showColor.r),l._showColor.g=parseInt(l._showColor.g-t.y*l._showColor.g),l._showColor.b=parseInt(l._showColor.b-t.y*l._showColor.b),J()}}),C=new JUI.DRAG({ele:c,par:u,mode:"y",onchange:function(t){var e=t.y%(1/6)/(1/6),n=Math.floor(t.y/(1/6)),i=255*e,a=255-i,o=l._rangeColor;switch(n){case 0:o.r=255,o.g=i,o.b=0;break;case 1:o.r=a,o.g=255,o.b=0;break;case 2:o.r=0,o.g=255,o.b=i;break;case 3:o.r=0,o.g=a,o.b=255;break;case 4:o.r=i,o.g=0,o.b=255;break;case 5:o.r=255,o.g=0,o.b=a;break;case 6:o.r=255,o.g=0,o.b=0}o.dr=255-o.r,o.dg=255-o.g,o.db=255-o.b,o.r=Math.round(o.r),o.g=Math.round(o.g),o.b=Math.round(o.b),r.css("background-color","rgb("+o.r+","+o.g+","+o.b+")");var s=l._showColor;s.r=parseInt(o.r+l._rate.x*o.dr),s.g=parseInt(o.g+l._rate.x*o.dg),s.b=parseInt(o.b+l._rate.x*o.db),s.r=parseInt(s.r-l._rate.y*s.r),s.g=parseInt(s.g-l._rate.y*s.g),s.b=parseInt(s.b-l._rate.y*s.b),J()}});if(this.showAlp)var w=new JUI.DRAG({ele:f,par:p,mode:"x",onchange:function(t){l._alpha=parseFloat(t.x.toFixed(2)),J()}});g.oninput=function(){l._isFromInput=!0,st(this.val(),l.showAlp)?(this.css("color","#222"),l.value=this.val()):this.css("color","#d44")},l.onchange=function(){if(st(l._value,l.showAlp)){l._value;if(function(){this._value.has("#")?this._showColor=function(t){{if(t=t.toLowerCase(),lt.test(t)){t=4==t.length?t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t.substring(1);for(var e={},n=["r","g","b"],i=0;i<3;i++)e[n[i]]=(a=t.substring(2*i,2*(i+1)),16*rt.indexOf(a[0])+rt.indexOf(a[1]));return e}B("色值的16进制格式有误:"+t)}var a}(this._value):(this._showColor=function(t){for(var e=t.substring(t.indexOf("(")+1,t.indexOf(")")).split(","),n={},i=["r","g","b"],a=0;a<3;a++){var o=parseInt(e[a]);(o<0||255<o)&&B("色值的rgb格式有误:"+t),n[i[a]]=o}4==e.length&&(n.a=parseFloat(e[3]),(n.a<0||1<n.a)&&B("色值的rgb格式有误:"+t));return n}(this._value),this.showAlp&&(this._alpha=this._showColor.a));var t=function(t){if(t.r==t.g&&t.b==t.g&&t.r==t.b)return{rangeColor:{r:255,g:0,b:0,dr:0,dg:255,db:255},rate:{x:1,y:(255-t.r)/255}};var e={},n=255/Math.max(t.r,t.g,t.b);e.y=1-1/n;var i={r:t.r*n,g:t.g*n,b:t.b*n,dr:255-t.r*n,dg:255-t.g*n,db:255-t.b*n},a=Math.min(i.r,i.g,i.b);for(var o in n=a/(255-a),e.x=a/255,i)i[o]!=a?i[o]=Math.round(i[o]-n*(255-i[o])):i[o]=0;return{rangeColor:i,rate:e}}(this._showColor);this._rate=t.rate,this._rangeColor=t.rangeColor}.call(l),J(),y.setPositionByRate(1-l._rate.x,l._rate.y),C.setPositionByRate(0,function(t){var e,n;e=0==t.b?255==t.r?(n=0,t.g/255):(n=1)-t.r/255:255!=t.b?255==t.g?(n=2,t.b/255):(n=5,1-t.b/255):0==t.r?(n=3,1-t.g/255):(n=4,t.r/255);return 1/6*(e+n)}(l._rangeColor)),l.showAlp&&w.setPositionByRate(l._alpha,0),e.attr("value",l._value),l._onchange){var t=l.jet||l;l._onchange.call(t,{ele:e,value:l._value,jui:l})}}},t.css("display","none"),e.$jui=l},JUI.COLOR.prototype.close=function(){},JUI.COLOR._name="j-color",JUI.COLOR.init=function(t){F(t,JUI.COLOR._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,new JUI.COLOR({ele:t}))})};var lt=/^#([0-9a-f]{3}|[0-9a-f]{6})$/,rt=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function ct(t){var e,n="#";for(var i in t)"a"!=i&&(n+=((e=parseInt(t[i]))<0?e=0:255<e&&(e=255),rt[Math.floor(e/16)]+rt[e%16]));return n}function ut(t,e){if(t.hasAttr("width")){var n=t.attr("width");parseFloat(n).toString()==n&&(n+="px"),t.css("width",n),e&&setTimeout(function(){e(t.wid())},500)}}JUI.SLIDER=function(t){this.ele=t.ele||null,this._value=t.value||!1,this.onchange=t.onchange||function(){},this.value=t.value||"",this.min=0,this.max=100,this.rate=0;var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){e._value=e.checkValue(t),e.onchange()}}),this.init()},JUI.SLIDER.prototype=R(),JUI.SLIDER.prototype.checkValue=function(t){return t<this.min&&(t=this.min),t>this.max&&(t=this.max),t},JUI.SLIDER.prototype.init=function(){var i=this,a=this.ele;a.hasAttr("min")&&(i.min=parseFloat(a.attr("min"))),a.hasAttr("max")&&(i.max=parseFloat(a.attr("max"))),ut(a);var o=a.wid(),e=S.ct("div.j-slider-bar"),n=S.ct("div.j-slider-c");a.append(e.append(n));var t=function(t){if(!L(a)){var e=a.getBoundingClientRect(),n=t.clientX-e.left;return o<n&&(n=o),n<0&&(n=0),i.value=i.min+n/o*(i.max-i.min),i.onchange(),!1}};i.onchange=function(){if(i.rate=(i.value-i.min)/(i.max-i.min),e.css("width",100*i.rate+"%"),a.attr("value",i._value),i._onchange){var t=i.jet||i;i._onchange.call(t,{ele:a,value:i._value,jui:i})}},a.hasAttr("value")&&(i._value=parseFloat(a.attr("value"))),i._value=i.checkValue(i._value),i.onchange(),a.onclick=t,n.onmousedown=function(){return n.onmousemove=t,a.onmousemove=t,!1},n.onmouseup=function(){n.onmousemove=null,a.onmousemove=null},a.onmouseup=function(){n.onmousemove=null,a.onmousemove=null},document.documentElement.on("mousemove",function(t){n.onmousemove&&n.onmousemove(t)},!0),document.documentElement.on("mouseup",function(t){n.onmouseup&&n.onmouseup(t)},!0),a.attr("value",this._value),a.$jui=i},JUI.SLIDER._name="j-slider",JUI.SLIDER.init=function(t){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,new JUI.SLIDER({ele:t}))})},JUI.SCREEN_DRAG=function(t){this.ele=t.ele,this.drag=t.drag||t.ele,this._w=this.ele.wid()/2,this._h=this.ele.hei()/2,this.x=t.x||-this._w,this.y=t.y||-this._h,this.ondrag=t.ondrag||function(){},this.ondrop=t.ondrop||function(){},this.init(t)},JUI.SCREEN_DRAG.prototype=R(),JUI.SCREEN_DRAG._name="j-drag",JUI.SCREEN_DRAG.prototype.init=function(t){var r=this;r.drag.on("mousedown",function(t){var e=t||event;!function(t){var e=t||t;e&&e.stopPropagation?e.stopPropagation():window.event&&(window.event.cancelBubble=!0)}(e);var a=r.ele.offsetLeft,o=r.ele.offsetTop,s=e.clientX,l=e.clientY;return r.drag.onmousemove=function(t){var e=t||event,n=a+(e.clientX-s),i=o+(e.clientY-l);return r.setPosition(n,i),!1},!(r.drag.onmouseup=function(){r.drag.onmousemove=null,r.drag.onmouseup=null})}),document.documentElement.on("mousemove",function(t){r.drag.onmousemove&&r.drag.onmousemove(t)},!0),document.documentElement.on("mouseup",function(t){r.drag.onmouseup&&r.drag.onmouseup(t)},!0);var e=function(){r.ele.css({left:r.ele.offsetLeft+"px",top:r.ele.offsetTop+"px",margin:"0"})};"confirm"===t.type?setTimeout(function(){e()},700):e()},JUI.SCREEN_DRAG.prototype.setPosition=function(t,e){this.x=t,this.y=e,this.ele.css({left:this.x+"px",top:this.y+"px"}),this.ondrag()},JUI.SCREEN_DRAG._drag_area="j-drag-area",JUI.SCREEN_DRAG.init=function(t){F(t,this._name).each(function(t){if(!t._hasInitJui){var e;t._hasInitJui=!0;var n=t.findClass(JUI.SCREEN_DRAG._drag_area);n.exist()?e=n:(e=t).addClass(JUI.SCREEN_DRAG._drag_area),new JUI.SCREEN_DRAG({ele:t,drag:e})}})},JUI.DIALOG=function(t){this.ele=t.ele||null,this.title=t.ele.hasAttr("dialog-title")?t.ele.attr("dialog-title"):"",this._nodrag="false"===t.ele.attr("dialog-drag"),this._noclose="false"===t.ele.attr("dialog-close"),this.onchange=t.onchange||function(){},this._value=t.value||!1;var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){e._value=t,e.onchange.call(e)}})},JUI.DIALOG.prototype=R(),JUI.DIALOG._name="j-dialog",JUI.DIALOG._ds=[],JUI.dialog={isOpen:function(){return S.cls("j-dialog-open j-dialog").exist()},clear:function(){JUI.DIALOG._ds.forEach(function(t){t.$jui.value=!1})},removeAll:function(){JUI.DIALOG._ds.forEach(function(t){t.$jui.value=!1,setTimeout(function(){t.parentNode&&t.remove()},500)}),JUI.DIALOG._ds=[]}},JUI.DIALOG.init=function(t){F(t,this._name).each(function(t){if(!t._hasInitJui){t._hasInitJui=!0;var e=new JUI.DIALOG({ele:t}),n=t.childNodes,i=S.ct("div.j-dialog-head"),a=S.ct("div.j-dialog-title").txt(e.title);if(i.append(a),!e._noclose){var o=S.ct("i.j-icon.icon-times");o.clk(function(){e.value=!1}),i.append(o)}var s=S.ct("div.j-dialog-body");n.each(function(t){s.append(t)}),t.append([i,s]);var l=t.hei(),r=t.wid();t.css({"margin-top":"0","margin-left":"0"});var c=function(){t.css({top:(S.height()-l)/2+"px",left:(S.width()-r)/2+"px"})};e.reinitPos=function(){t.hei()!==l&&(l=t.hei(),r=t.wid(),c())},c(),e.onchange=function(){e._value?(e.reinitPos(),e.ele.css("visibility","visible"),e.ele.addClass("j-dialog-open").removeClass("j-dialog-close")):(e.ele.addClass("j-dialog-close").removeClass("j-dialog-open"),setTimeout(function(){e.ele.css("visibility","hidden")},500),e._onclose&&e._onclose.call(e.jet))},(t.$jui=e)._nodrag?i.css("cursor","default"):new JUI.SCREEN_DRAG({ele:t,drag:i}),JUI.DIALOG._ds.push(t)}})},JUI.PAGE=function(t){this.total=t.total||10,this._value=t.current||1,this.ele=t.ele||null,this.call=t.call||null;var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){(t=e.checkValue(t))!==e._value&&(e._value=t,e.onchange())}}),this.init()},JUI.PAGE.prototype=R(),JUI.PAGE.prototype.checkValue=function(t){return t<1?t=1:t>this.total&&(t=this.total),t},JUI.PAGE.prototype.init=function(){var e=this,n=this.ele,t=S.ct("button.j-btn.s[title=首页]").html('<i class="j-icon icon-step-backward"></i>').clk(function(){e.value=1}),i=S.ct("button.j-btn.s[title=上一页]").html('<i class="j-icon icon-chevron-left"></i>').clk(function(){e.value=e.value-1}),a=S.ct("span.j-page-text"),o=S.ct("span").txt(e._value),s=S.ct("span").txt(" / "),l=S.ct("span").txt(e.total);a.append([o,s,l]);var r=S.ct("input.j-input.s[type=number]").val(e.value),c=S.ct("button.j-btn.info.s[title=跳转]").html('<i class="j-icon icon-location-arrow"></i>').clk(function(){var t=this.prev().val();""!==t&&(e.value=parseInt(t))}),u=S.ct("button.j-btn.s[title=下一页]").html('<i class="j-icon icon-chevron-right"></i>').clk(function(){e.value=e.value+1}),h=S.ct("button.j-btn.s[title=末页]").html('<i class="j-icon icon-step-forward"></i>').clk(function(){e.value=e.total});n.append([t,i,a,r,c,u,h]),e.onchange=function(){if(o.txt(e._value),r.val(e.value),e.call&&e.call({current:e._value,total:e.total}),n.attr("value",this._value),e._onchange){var t=e.jet||e;e._onchange.call(t,{ele:n,value:e._value,jui:e})}},e.onchangetotal=function(){l.txt(e.total),e.call&&e.call({current:e._value,total:e.total})},n.attr("value",this._value),n.$jui=e},JUI.PAGE._name="j-page",JUI.PAGE.init=function(t){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,new JUI.PAGE({ele:t}))})},JUI.TAB=function(t){this._value=t.value||t.ele.attr("value"),this.ele=t.ele||null,this.call=t.call||null,this.tabs=[];var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){(t=e.checkValue(t))!==e._value&&(e._value=t,e.onchange())}}),this.init()},JUI.TAB.prototype=R(),JUI.TAB.prototype.checkValue=function(t){return-1!=this.tabs.indexOf(t.toString())?t.toString():this.tabs[0]},JUI.TAB.prototype.init=function(){var o=this,n=this.ele,s="j-tab-active",t=n.child(),l=S.ct("div.j-tab-head"),r=S.ct("div.j-tab-body"),c=0;t.each(function(t,e){var n=t.hasAttr("title")?t.attr("title"):t.attr("value"),i=t.hasAttr("value")?t.attr("value"):t.attr("title"),a=S.ct("span").txt(n).clk(function(){this.hasClass(s)||(o.value=this._j_tab_value)});a._j_tab_value=i,o.tabs.push(i),0===e||i===o._value?(a.addClass(s),l.append(a),0<e&&(l.child(0).removeClass(s),c=e)):l.append(a),t.addClass("j-tab-item"),r.append(t)}),r.child(c).addClass(s),n.append([l,r]),o.onchange=function(){var t=o.tabs.indexOf(o._value);if(n.findClass(s).removeClass(s),l.child(t).addClass(s),r.child(t).addClass(s),o.call&&o.call({current:o._value,total:o.total}),n.attr("value",this._value),o._onchange){var e=o.jet||o;o._onchange.call(e,{ele:n,value:o._value,jui:o})}},n.attr("value",this._value),n.$jui=o},JUI.TAB._name="j-tab",JUI.TAB.init=function(t){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,new JUI.TAB({ele:t}))})};var ht="buttons",vt="disabled",dt="callback",ft={_str:1,_key:["if","else","for","switch","while","try","catch","finally","new ","return","this","break","default","case","continue","throw","throws","in ","function","var","undefined","typeof","important","private","protected","public","abstract","static","void","boolean","byte","char","int ","double","enum","const","final","float","long","short","true","True","false","False","null","String","string","object","assert","class ","do","extends","goto","implements","import","instanceof","interface","native","package","strictfp","super","synchronized","transient","volatile","operator","out ","override","params","readonly","ref","sbyte","sealed","sizeof","stackalloc","struct","uint","ulong","unchecked","unsafe","ushort","using","virtual","void","volatile","as ","base","bool","checked","decimal","delegate","event","explicit","extern","foreach","internal","is ","lock","namespace"],_tag:3,_attr:4,_sign:["#","=","&gt;","&lt;","{","}","\\(","\\)","\\[","\\]",",","&&","\\.","\\?","\\|","\\+","-",";\n",":","!","%","\\^"]};JUI.CODE=function(t){this._value=t.value||t.ele.attr("value"),this.ele=t.ele||null,this.call=t.call||null,this.lineHeight=22;var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){t!==e._value&&(e._value=t,e.onchange())}}),this.init()},JUI.CODE.prototype=R(),JUI.CODE.prototype.init=function(){var e,n,i=this,a=this.ele;!function(t,i){if(0==t.findClass("code_editor").length){var e=t.html();if(!t.hasAttr("jui-code-trim")||"false"!==t.attr("jui-code-trim")){for(;"\n"==e[0];)e=e.substr(1);e=e.replace(/(\s*$)/g,"")}var n=/^\d+$/,a=t.hasAttr("width")?t.attr("width"):"300px";n.test(a)&&(a+="px");var o=t.hasAttr("height")?t.attr("height"):"200px";n.test(o)&&(o+="px"),t.empty();var s=S.ct("div.code_active_line");t.append(s);var l=S.ct("pre.code_editor_view._bottom").html(e);t.append(l);var r=S.ct("pre.code_editor_view").html(e);t.append(r),i.view1=l,i.view2=r;var c=S.ct("textarea.code_editor[spellcheck=false]").html(e).data("code",e);i.codearea=c,t.hasAttr(vt)&&"false"!==t.attr(vt)&&c.attr(vt,vt).css("cursor","no-drop"),t.append(c);var u=!1;t.hasAttr(dt)&&(u=!0,t.code_callback=_._checkFunction(t.attr(dt))),t.css({width:a,height:o}),"auto"==o?(i.view1.css("height",o),i.view2.css("height",o),i.codearea.data("height","auto").css("overflow-y","hidden").css("height",o)):t.child().css("height","100%"),"auto"==a?(i.view1.css("width",o),i.view2.css("width",o),i.codearea.data("width","auto").css("overflow-x","hidden").css("width",a)):(i.view1.css("width","100%"),i.view2.css("width","100%"),i.codearea.css("width","100%"));var h=45;if(t.hasAttr(ht)){i.view1.css("padding-top","40px"),i.view2.css("padding-top","40px"),i.codearea.css("padding-top","40px"),h+=40;var v=t.attr(ht),d=[];if(v==ht||"true"==v||""==v)S.each(pt,function(t,e){("submit"!=e||u)&&d.push(_t(t,i))});else{var f=v.split(";");f.each(function(t){""!=t&&("submit"!=t||u)&&d.push(_t(pt[t.toLowerCase()],i))})}t.append(S.ct("div.code_set_w").append(d))}var p=void 0;"false"!==t.attr("jui-code-line")&&(p=S.ct("div.code_line_w"),t.append(p),i.reinitLine=function(){var t=p.children.length,e=i.codearea.val().timeOf("\n")+1;if(t<e)for(var n=1;n<=e-t;n++)p.append(S.ct("div").txt(et(t+n)));else if(e<t)for(var n=e;n<t;n++)p.child(e).remove()}),i.setActiveLine=function(t){if("hide"===t)s.css("opacity","0"),p&&p.findClass("j-active").removeClass("j-active");else if("show"===t)s.css("opacity","1");else{var e=t*i.lineHeight;s.css("transform","translate(0,"+e+"px)"),s.css("-webkit-transform","-webkit-translate(0,"+e+"px)"),p&&0<p.children.length&&(p.findClass("j-active").removeClass("j-active"),p.child(t).addClass("j-active"))}},i.setHeight=function(){p&&p.child().css({height:i.lineHeight+"px","line-height":i.lineHeight+"px"}),t.child(0).css("height",i.lineHeight+"px")},t.css("min-height",h+"px"),""!=e&&Jt.call(i),window.navigator.userAgent.has("iPhone")&&(i.view1.css("left","3px"),i.view2.css("left","3px"))}}(a,i),e=a.findClass("code_editor"),n=i,e.on({mouseleave:function(){},keydown:function(t){(function(t,e){"0"==e.attr("jet-change")&&e.attr("jet-change","1"),13!=t.keyCode&&9!=t.keyCode||Jt.call(this)}).call(n,t,this)},keyup:function(t){var e=t.keyCode;13!=e&&9!=e||(n.value=this.value),38!=e&&40!=e&&13!=e&&8!=e||Ut.call(n)},input:function(){n.value=this.value},scroll:function(t){jt(n.ele).scrollTo(this.scroll(),null,10).scrollXTo(this.scrollX(),null,10)},click:function(){Ut.call(n),n.setActiveLine("show")},blur:function(){n.setActiveLine("hide")}}),e.on("keydown",gt,!0),e.each(function(t){t.parent().hasAttr("onload")&&window[t.parent().attr("onload")](e.parent())}),i.onchange=function(){if(i.codearea.val(i._value),Jt.call(i),i.call&&i.call({current:i._value,total:i.total}),i._onchange){var t=i.jet||i;i._onchange.call(t,{ele:a,value:i._value,jui:i})}},a.$jui=i},JUI.CODE._name="j-code",JUI.CODE.init=function(t){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,new JUI.CODE({ele:t}))})};var pt={fontsizeup:["fontSizeUp","放大字体","zoom-in"],fontsizedown:["fontSizeDown","缩小字体","zoom-out"],fullscreen:["fullScreen","全屏显示","expand-full"],fix:["fix","修复重影问题","wrench"],clearcolor:["clearColor","清除颜色","paint-brush"],clearcode:["clearCode","清除代码","trash"],resetcode:["resetCode","重置代码","undo"],copy:["copy","复制代码","copy"],submit:["submit","提交代码","share-sign"]};function _t(t,e){return S.ct("i.j-icon.icon-"+t[2]).clk(function(){e[t[0]](this)}).tip(t[1])}function gt(t){var e=JUI.CODE.tab,n=e.length;if(9===t.keyCode){t.preventDefault();var i=this.selectionStart,a=this.selectionEnd;if(!1===t.shiftKey)if(mt(this)){for(var o=(u=It(this)).length,s=void 0,l=void 0,r=0;o--;){var c=u[o];u[o+1]&&i!=u[o+1]&&(c=u[o+1]),i<=c&&u[o]<a&&(this.value=this.value.slice(0,u[o])+e+this.value.slice(u[o]),s=u[o],l||(l=u[o+1]?u[o+1]-1:"end"),r++)}this.selectionStart=s,this.selectionEnd="end"!==l?l+n*r:this.value.length}else this.value=this.value.slice(0,i)+e+this.value.slice(i),this.selectionStart=i+n,this.selectionEnd=a+n;else if(mt(this)){var u;for(o=(u=It(this)).length,s=void 0,l=void 0,r=0;o--;){c=u[o];u[o+1]&&i!=u[o+1]&&(c=u[o+1]),i<=c&&u[o]<a&&(this.value.substr(u[o],n)==e&&(this.value=this.value.slice(0,u[o])+this.value.slice(u[o]+n),r++),s=u[o],l||(l=u[o+1]?u[o+1]-1:"end"))}this.selectionStart=s,this.selectionEnd="end"!==l?l-r*n:this.value.length}else this.value.substr(i-n,n)==e?(this.value=this.value.substr(0,i-n)+this.value.substr(i),this.selectionStart=i-n,this.selectionEnd=a-n):"\n"==this.value.substr(i-1,1)&&this.value.substr(i,n)==e&&(this.value=this.value.substring(0,i)+this.value.substr(i+n),this.selectionStart=i,this.selectionEnd=a-n)}else if(13===t.keyCode&&!1===t.shiftKey){cursorPos=this.selectionStart,u=It(this),numStartIndices=u.length,startIndex=0,endIndex=0,tabMatch=new RegExp("^"+e.replace("\t","\\t").replace(/ /g,"\\s")+"+","g"),lineText="",tabs=null;for(var h=0;h<numStartIndices;h++){if(u[h+1]&&cursorPos>=u[h]&&cursorPos<u[h+1]){startIndex=u[h],endIndex=u[h+1]-1;break}startIndex=u[numStartIndices-1],endIndex=this.value.length}if(lineText=this.value.slice(startIndex,endIndex),tabs=lineText.match(tabMatch),null!==tabs){t.preventDefault();var v=tabs[0],d=v.length,f=cursorPos-startIndex;f<d&&(d=f,v=v.slice(0,f)),this.value=this.value.slice(0,cursorPos)+"\n"+v+this.value.slice(cursorPos),this.selectionStart=cursorPos+d+1,this.selectionEnd=this.selectionStart}}}function mt(t){var e=t.value.slice(t.selectionStart,t.selectionEnd);return!!new RegExp(/\n/).test(e)}function It(t){for(var e=t.value,n=[],i=0;e.match(/\n/)&&0<e.match(/\n/).length;){i=0<n.length?n[n.length-1]:0;var a=e.search("\n");n.push(a+i+1),e=e.substring(a+1)}return n.unshift(0),n}function Ut(){var t=function(t){var e=t.value,n="";if("selectionStart"in t)n=e.substr(0,t.selectionStart);else if(document.createRange)(i=document.createRange()).moveStart("character",-t.value.length),n=i.text;else{var i;(i=document.selection.createRange()).moveStart("character",-t.value.length),n=i.text}return n.split("\n").length-1}(this.codearea);this.setActiveLine(t)}function Jt(){var e,t,n,i=this.codearea.val(),a=i.replaceAll("<","&lt;").replaceAll(">","&gt;")+" ";a=wt(a,/(&lt;)(.*?)(&gt;)/g,"cd_tag"),e=a,ft._key.each(function(t){e=e.replaceAll(t,"<cd_key>"+t+"</cd_key>")}),a=null==(n=(t=a=e).match(Ct))?t:(n.each(function(t,e){n[e]=n[e].replace(t,t[0]+"<cd_fun>"+t.substring(1,t.length-1)+"</cd_fun>(")}),t.replaceAll(Ct,n)),a=wt(a,/(\d+)/g,"cd_num"),a=wt(a,/((")(.*?)("))|((')(.*?)('))/g,"cd_str"),a=wt(a,/((\/\/)(.*?)(\n))|((\/\*)((.|\n)*?)(\*\/))/g,"cd_note"),a=wt(a,/(&lt;!--)((.|\n)*?)(--&gt;)/g,"cd_note"),jt(this.ele,1).html(a);var o,s,l=(o=i.replaceAll("<","&lt;").replaceAll(">","&gt;")+" ",ft._sign.each(function(t){o=o.replaceAll(t,"<cd_sign>"+(t.has("\\")?t.substring(1):t)+"</cd_sign>")}),o);jt(this.ele,0).html(l),yt(s=this.codearea,"height"),yt(s,"width"),function(){this.reinitLine&&this.reinitLine()}.call(this)}function jt(t,e){return null!=e?t.child(e+1):t.findClass("code_editor_view")}function yt(t,e){if("auto"==t.data(e)){var n=t.prev().css(e);"auto"==n?setTimeout(function(){t.css(e,t.prev().css(e))},0):t.css(e,n)}}JUI.CODE.prototype.fix=function(t){t.data("flag")?(t.data("flag",!1),this.view1.css("left","3px"),this.view2.css("left","3px")):(t.data("flag",!0),this.view1.css("left","0px"),this.view2.css("left","0px"))},JUI.CODE.prototype.clearColor=function(t){this.codearea.toggleClass("bg"),this.view1.fadeToggle(),this.view2.fadeToggle()},JUI.CODE.prototype.clearCode=function(t){JUI.confirm("是否确认清空代码(该操作不可撤销)？",function(){this.ele;this.view1.empty(),this.view2.empty(),this.codearea.val("").focus()})},JUI.CODE.prototype.resetCode=function(t){var e=this;JUI.confirm("是否确认重置代码(该操作不可撤销)？",function(){var t=this.codearea;t.val(t.data("code").replaceAll("&lt;","<").replaceAll("&gt;",">")).focus(),Jt.call(e)})},JUI.CODE.prototype.copy=function(t){S.isMobile()?JUI.msg("移动端不支持该方法","warn"):this.codearea.copy()?JUI.msg("复制成功！","success"):(this.codearea.select(),JUI.msg("您的浏览器不支持该方法。请按Ctrl+V手动复制","info"))},JUI.CODE.prototype.fullScreen=function(t){this.ele.toggleClass("j_full"),t.toggleClass("icon-collapse-full"),S.body().toggleClass("j_hidden")},JUI.CODE.prototype.fontSizeUp=function(){var t=this.fontSize();t<35?this.fontSize(t+1):JUI.msg("已达到最大大小(35px)","warn")},JUI.CODE.prototype.fontSizeDown=function(){var t=this.fontSize();12<t?this.fontSize(t-1):JUI.msg("已达到最小大小(12px)","warn")},JUI.CODE.prototype.submit=function(){this.ele.code_callback.call(this,this.codearea.val())},JUI.CODE.prototype.txt=function(t){var e=this.codearea;if(void 0===t)return e.val();e.val(t).focus(),Jt.call(this)},JUI.CODE.prototype.fontSize=function(t){var e=this.ele;if(void 0===t){var n=e.css("font-size");return parseInt(n.substring(0,n.length-2))}this.lineHeight=t+4,this.setHeight(),"auto"===this.ele.attr("height")&&Jt.call(this),e.css({"font-size":t+"px","line-height":this.lineHeight+"px"})},JUI.CODE.extend=function(t){if("array"==typeof t)ft._key.appendArray(t);else{if("string"!=typeof t)throw new Error("extend:参数类型错误");ft._key.append(t)}},JUI.CODE.tab="\t";var Ct=/(\.)(.*?)(\()/g;function wt(t,e,n){var i=t.match(e);return null!=i&&(i.each(function(t,e){i[e]="<"+n+">"+t+"</"+n+">"}),t=t.replaceAll(e,i)),t}JUI.BTN={_name:"j-btn",init:function(t){F(t,JUI.BTN._name).each(function(t){if(ut(t),t.hasAttr("icon")){var e='<i class="j-icon icon-'+t.attr("icon")+'"></i>';t.hasClass("j-icon-right")?e=t.html()+e:e+=t.html(),t.html(e).removeAttr("icon")}})}},JUI.INPUT={_name:"j-input",init:function(t){F(t,JUI.INPUT._name).each(function(t){if(ut(t),t.hasAttr("icon")||t.hasAttr("title")){var e=!0;t.hasClass("j-icon-right")&&(e=!1);var n="";t.hasAttr("icon")&&(n+='<i class="j-icon icon-'+t.attr("icon")+'"></i>',t.removeAttr("icon")),t.hasAttr("title")&&(n+=t.attr("title"),t.removeAttr("title"));var i=S.ct("div.j-input-w").html('<div class="j-icon-w">'+n+"</div>");t.className.split(" ").forEach(function(t){A.has(t)&&i.addClass(t)}),t.before(i),i.prepend(t);var a=i.child(1).wid()+5;e?t.css("padding-left",a+"px"):t.css("padding-right",a+"px")}})}},JUI.PROGRESS=function(t){this.ele=t.ele||null,this._value=t.value||!1,this.onchange=t.onchange||function(){},this.value=t.value||"";var e=this;Object.defineProperty(e,"value",{configurable:!0,get:function(){return e._value},set:function(t){e._value=t,e._value<0&&(e._value=0),100<e._value&&(e._value=100),e.onchange()}}),this.init()},JUI.PROGRESS.prototype=R(),JUI.PROGRESS.prototype.init=function(){var e=this,n=this.ele;ut(n);n.wid();var i=S.ct("div.j-progress-bar");n.append(i),e.onchange=function(){if(e.rate=e.value/100,i.css("width",100*e.rate+"%"),n.attr("value",e._value),e._onchange){var t=e.jet||e;e._onchange.call(t,{ele:n,value:e._value,jui:e})}},n.hasAttr("value")&&(e._value=parseFloat(n.attr("value"))),e._value=e.checkValue(e._value),e.onchange(),n.attr("value",this._value),n.$jui=e},JUI.PROGRESS.prototype.checkValue=function(t){return t<0&&(t=0),100<t&&(t=100),t},JUI.PROGRESS._name="j-progress",JUI.PROGRESS.init=function(t){F(t,this._name).each(function(t){t._hasInitJui||(t._hasInitJui=!0,new JUI.PROGRESS({ele:t}))})},S.ready(function(){JUI.init()})}();